<!-- 

      담당자 : 이승현
      콘셉트 : 키오스크 설정 기반 재고 관리 시스템
      기능 설명 : 1. 대분류 추가 기능
                  > [기존에 없던 분류를 추가]

                2. 소분류 추가 기능
                  > [기존에 없던 분류를 추가]

                3. 등록 기능                    
                  > 3-1. [수량은 숫자만 입력 가능]  // 승현
                  > 3-2. [제품 코드는 문자+숫자]    // 승현

                4. 초기화 기능
                  > [작성 내용 모두 지우는 기능]

                5. 취소 기능
                  > [작성 중인 화면 종료]

                6. 엑셀 파일 등록 시 자동으로 등록되는 기능
                  > [엑셀 양식은 제공]

  -->
<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--=============== JQUERY ===============-->
  <script src="js/jquery.min.js"></script>

  <!--=============== CSS ===============-->
  <link rel="stylesheet" href="css/stockRegistration.css">

  <!--=============== JS ===============-->
  <script src="js/stockRegistration.js" defer></script>
    
  <title>물품 등록</title>
</head>
<body>
  <!--=============== HEADER ===============-->
  <header>

    <%- include('partials/header.ejs'); %>

  </header>
  <div class="registrationSection container">
  <section class="registrationWrap">
    <section class="headerWrap">
      <h2>물품 등록</h2>
      <div class="btnWrap">
        <button class="btn" id="btn_reset">초기화</button>
        <button class="btn" id="btn_callExcel">엑셀 불러오기</button>
      </div>
    </section>
    <section class="contentWrap">
      <h3 class="hidden">물품 등록 내용</h3>
      <!-- ** form action 때문에 groupPlusModal창 실행이 안 됨. 오류 수정 요망. -->
      <div class="tableSection">
      <!-- <form id="reset_test_form"> -->
        <table id="stock">
        <tbody>
        <tr>
            <th><label for="productName">이름</label></th>
            <td><input type="text" name="productName" id="productName" placeholder="물품명을 입력해 주세요."></td>
          </tr>
          <tr>
            <th><label for="bigGroup">대분류</label></th>
            <!-- <td><label for="group">분류</label></td> -->
            <td>
              <select id="bigGroup" name="bigGroup" class="bigGroup" onchange="selectGroup()">
                <option value="default" selected>-- 대분류 --</option>
                <option value="오실로스코프">오실로스코프</option>
                <option value="신호, 스펙트럼 및 변조 분석기">신호, 스펙트럼 및 변조 분석기</option>
                <option value="구성 요소 및 액세서리">구성 요소 및 액세서리</option>
                <option value="신호 발생기">신호 발생기</option>
                <option value="Keithley 장비 및 제품">Keithley 장비 및 제품</option>
                <option value="Keithley 반도체 테스트 시스템">Keithley 반도체 테스트 시스템</option>
                <option value="Keithley 스위칭 및 데이터 획득 시스템">Keithley 스위칭 및 데이터 획득 시스템</option>
                <option value="소프트웨어">소프트웨어</option>
              </select>
            </td>
            <th><label for="smallGroup">소분류</label></th>
            <td>
              <select name="smallGroup" id="smallGroup">
                <option value="">-- 소분류 --</option>
              </select>
            </td>
            <td>
              <%- include('partials/groupPlusModal.ejs'); %>
              <!-- <button id="groupPlus" value="분류 등록">+</button> -->
            </td>
          </tr>  
          <tr>
            <th><label for="rentable">대여 가능 여부</label></th>
            <td><label for="rentable"><input type="radio" class="rentable" id="rentable" name="rentable" value="0">O</label></td>
            <td><label for="rentable"><input type="radio" class="rentable" id="anRentable" name="rentable" value="1">X</label></td>
          </tr>
          <tr>
            <th><label for="mustReturn">반납 필요 여부</label></th>
            <td><label for="mustReturn"><input type="radio" id="mustReturn" name="mustReturn" value="0">O</label></td>
            <td><label for="mustReturn"><input type="radio" id="notMustReturn" name="mustReturn" value="1">X</label></td>
          </tr>
          <!-- 
              담당자 : 이승현
              기능 설명 : 예외) 제품 코드는 [문자+숫자]로만 이루어지도록 한다.
              구현 방법 : (keyPress, keyDown, input) event 받아서 replace - 입력 후 리플레이스 되는 형태라서 그런지 한글은 특히 입력/삭제가 눈에 보인다.
                          이전 입력된 값을 저장했다가 숫자가 아닌 값이 들어오면 이전 값으로 돌려 놓는 형태
  
                          ** 문자라고 해서 영어뿐만 아닌 한글도 포함하였다.
                          *** 여기서는 문자와 숫자를 제외한 것은 아예 타이핑이 안 된다.
             -->
          <tr>
            <th><label for="productCode">제품 코드</label></th>
            <td><input type="text" onKeyup="this.value=this.value.replace(/[^-0-9a-zA-Zㄱ-ㅎ]/g,'');"
              id="productCode" name="productCode" value="제품 코드" placeholder="제품 코드는 문자와 숫자로 이루어져야 합니다."></td>
          </tr>
          <!-- 
              담당자 : 이승현
              기능 설명 : 3-1. [수량은 숫자만 입력 가능]  
              구현 방법 : * javaScript로 유효성 검증 함수를 활용
           -->
          <tr>
            <th><label for="quantity">수량</label></th>
            <td><input type="number" id="quantity" name="quantity" value="수량" placeholder="숫자만 입력이 가능합니다."></td>
          </tr>
        </tbody>
      </table>  
        <!-- </form> -->
      </div>
      <div class="btnWrap">
        <button class="btn rBtn" id="registration">등록</button>
        <button class="btn cBtn" id="cancel" onclick="goCancle()">취소</button>
      </div>
      
      </section>
      
    </section>
    <section class="registrationWrapImg">
      <img src="img/stockRegistration.png" alt="">
    </section>
    </div>
    <!--=============== FOOTER ===============-->
    <footer>
  
      <%- include('partials/footer.ejs'); %>
  
    </footer>
  <script type="text/javascript">
    


  // var params = {
  //   postType: 'insEvent'
  //   ,rcvSlct: $('input[name=radio]:checked').val()   // radio값 받아오기
  //   ,stockName     : $("#productName").val()     // 제품명
  //   // *** 오류코드
  //   // ,category:{bigGroup: $("#")}             // 분류
  //   ,stockNumber    : $("#productCode").val()   // 제품코드
  //   ,rental         : $('#mustReturn')    // 대여 가능 여부(O,X)
  //   // *** 해결해야 할 것 : get으로 백에서 계산된 값 받아오기 ***
  //   // ,stockRentableNumber    : $("").val()       // 대여 가능 수량
  //   ,stockCount     : $("#rentingNumber").val() // 대여 중 수량
  //   ,stockMount     : $("#totalNumber").val()   // 총 수량
  //   }
        
  //   // ajax 통신
  //   $.ajax({
  //       type : "POST",            // HTTP method type(GET, POST) 형식이다.
  //       url : "/",      // 컨트롤러에서 대기중인 URL 주소이다.
  //       data : params,            // Json 형식의 데이터이다.
  //       success : function(data){ // 비동기통신의 성공일경우 success콜백으로 들어옵니다. 'res'는 응답받은 데이터이다.
  //           console.log(data);
  //           if(data.type == 2) {
  //               alert("대여 가능");
  //           }
  //           else {
  //               alert("대여 불가능")
  //           }    
  //       // 응답코드 > 0000
  //           // if(res.loginSuccess!=false){
  //           //     alert(res.successmessage);}
  //           //     // window.location.replace("/index");
  //           // else{
  //           //     alert(res.message);}
  //       },
  //       error : function(XMLHttpRequest, textStatus, errorThrown){ // 비동기 통신이 실패할경우 error 콜백으로 들어옵니다.
  //           alert("통신 실패.")
  //       }
  //   });

  //아이디가 bigGroup인 select가 값이 바뀌면 진행
//   $('#bigGroup').on('change', function () {
//     console.log(bigGroup);
//     $('#smallGroup').html('<option value="">-- 소분류 --</option>');

//     bigGroup = $(this).val();

//     if (bigGroup != "") {

//       $("select[name=smallGroup]").attr("disabled",false);

//       jQuery.ajax({
//         type: "GET",
//         url: "/stockRegistration?bigGroup="+bigGroup,
//         cache: false,
//         data:{ category:{
//           bigGroup : $("#bigGroup").val(),
//           smallGroup: $("#smallGroup").val()
//         }},
//         datatype: "JSON",
//         success: function (obj) {
//           var data = JSON.parse(obj);

//           $.each(data, function (res, req) {
//               $('<option></option>').val(res).text(req).appendTo($('#smallGroup'));
//           });

//         },
//         error: function (xhr, status, error) {
//             console.log("ERROR!!!");
//         }
//     });
//   } else {
//       $("select[name=smallGroup]").attr("disabled",true);
//   }
//   $(this).closest('form').submit();
// });


  </script>
</body>

</html>